# مستندسازی ساخت ماشین مجازی Ubuntu 24.04 با Packer

## مقدمه
در این پروژه هدف ما ساخت یک ایمیج قابل استفاده از اوبونتو 24.04 برای محیط‌های VirtualBox و VMware با استفاده از ابزار Packer است. این فرآیند به گونه‌ای طراحی شده که هم قابل تکرار باشد و هم امکان شخصی‌سازی و توسعه در آینده را فراهم کند.

---

## مراحل انجام کار

### 1. نصب Desktop Environment
در ابتدا باید یک محیط دسکتاپ (Desktop Environment) مناسب روی سیستم نصب شود تا بتوان به راحتی با ماشین‌های مجازی و ابزارهای گرافیکی کار کرد. این مرحله به ویژه برای مشاهده و رفع مشکلات احتمالی در فرآیند بوت ماشین مجازی اهمیت دارد.

### 2. نصب VirtualBox و VMware
در گام بعدی، نرم‌افزارهای VirtualBox و VMware را نصب می‌کنیم تا بتوانیم ماشین‌های مجازی را اجرا و مدیریت کنیم. این ابزارها به عنوان Hypervisor عمل کرده و امکان اجرای همزمان چندین سیستم‌عامل را فراهم می‌کنند.

### 3. مقداردهی اولیه پروژه با Packer
پس از نصب پیش‌نیازها، وارد دایرکتوری پروژه شده و دستور زیر را اجرا می‌کنیم:

```bash
packer init .
```

این دستور وابستگی‌های مورد نیاز را دانلود و پروژه را برای اجرای build آماده می‌کند.

### 4. اجرای اولیه و مشاهده ماشین مجازی
در اولین اجرای build، توصیه می‌شود headless را غیرفعال (false) قرار دهید تا بتوانید فرآیند بوت و اجرای اسکریپت‌ها را به صورت گرافیکی مشاهده کنید. این کار کمک می‌کند تا مطمئن شوید boot commandها و اسکریپت‌های نصب به درستی اجرا می‌شوند و در صورت وجود خطا، آن را سریع‌تر شناسایی و رفع کنید.

### 5. فعال‌سازی headless برای اجراهای بعدی
پس از اطمینان از صحت اجرای اسکریپت‌ها و فرآیند نصب، می‌توانید مقدار headless را به true تغییر دهید تا buildها به صورت غیرگرافیکی و در پس‌زمینه اجرا شوند. این کار باعث صرفه‌جویی در منابع و تسریع فرآیند build می‌شود.

### 6. نکته مهم درباره boot_command
در فایل Packer، آرایه boot_command به گونه‌ای تعریف شده که هر دستور به صورت جداگانه و مرحله‌به‌مرحله ارسال شود. این کار باعث می‌شود که در حالت غیر headless (گرافیکی)، تایپ دستورات با دقت و بدون خطا انجام شود. توجه به این نکته در اجرای صحیح فرآیند نصب بسیار مهم است.

---

## جمع‌بندی
با طی کردن مراحل فوق، یک فرآیند استاندارد و قابل اطمینان برای ساخت ایمیج اوبونتو 24.04 در محیط‌های VirtualBox و VMware خواهید داشت. این روش علاوه بر سادگی، امکان توسعه و شخصی‌سازی را نیز برای پروژه‌های آینده فراهم می‌کند.

---
